"use strict";var Gt=Object.create;var V=Object.defineProperty;var Vt=Object.getOwnPropertyDescriptor;var Ht=Object.getOwnPropertyNames;var Bt=Object.getPrototypeOf,Xt=Object.prototype.hasOwnProperty;var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Wt=(e,t)=>{for(var r in t)V(e,r,{get:t[r],enumerable:!0})},Se=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ht(t))!Xt.call(e,i)&&i!==r&&V(e,i,{get:()=>t[i],enumerable:!(n=Vt(t,i))||n.enumerable});return e};var R=(e,t,r)=>(r=e!=null?Gt(Bt(e)):{},Se(t||!e||!e.__esModule?V(r,"default",{value:e,enumerable:!0}):r,e)),Jt=e=>Se(V({},"__esModule",{value:!0}),e);var ke=w((T,Ne)=>{"use strict";var ne=require("crypto");T=Ne.exports=z;function z(e,t){return t=Re(e,t),Kt(e,t)}T.sha1=function(e){return z(e)};T.keys=function(e){return z(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})};T.MD5=function(e){return z(e,{algorithm:"md5",encoding:"hex"})};T.keysMD5=function(e){return z(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var _=ne.getHashes?ne.getHashes().slice():["sha1","md5"];_.push("passthrough");var Ae=["buffer","hex","binary","base64"];function Re(e,t){t=t||{};var r={};if(r.algorithm=t.algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=t.ignoreUnknown===!0,r.respectType=t.respectType!==!1,r.respectFunctionNames=t.respectFunctionNames!==!1,r.respectFunctionProperties=t.respectFunctionProperties!==!1,r.unorderedArrays=t.unorderedArrays===!0,r.unorderedSets=t.unorderedSets!==!1,r.unorderedObjects=t.unorderedObjects!==!1,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,typeof e>"u")throw new Error("Object argument required.");for(var n=0;n<_.length;++n)_[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=_[n]);if(_.indexOf(r.algorithm)===-1)throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+_.join(", "));if(Ae.indexOf(r.encoding)===-1&&r.algorithm!=="passthrough")throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+Ae.join(", "));return r}function $e(e){if(typeof e!="function")return!1;var t=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i;return t.exec(Function.prototype.toString.call(e))!=null}function Kt(e,t){var r;t.algorithm!=="passthrough"?r=ne.createHash(t.algorithm):r=new Ie,typeof r.write>"u"&&(r.write=r.update,r.end=r.update);var n=ie(t,r);if(n.dispatch(e),r.update||r.end(""),r.digest)return r.digest(t.encoding==="buffer"?void 0:t.encoding);var i=r.read();return t.encoding==="buffer"?i:i.toString(t.encoding)}T.writeToStream=function(e,t,r){return typeof r>"u"&&(r=t,t={}),t=Re(e,t),ie(t,r).dispatch(e)};function ie(e,t,r){r=r||[];var n=function(i){return t.update?t.update(i,"utf8"):t.write(i,"utf8")};return{dispatch:function(i){e.replacer&&(i=e.replacer(i));var s=typeof i;return i===null&&(s="null"),this["_"+s](i)},_object:function(i){var s=/\[object (.*)\]/i,h=Object.prototype.toString.call(i),l=s.exec(h);l?l=l[1]:l="unknown:["+h+"]",l=l.toLowerCase();var m=null;if((m=r.indexOf(i))>=0)return this.dispatch("[CIRCULAR:"+m+"]");if(r.push(i),typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(i))return n("buffer:"),n(i);if(l!=="object"&&l!=="function"&&l!=="asyncfunction")if(this["_"+l])this["_"+l](i);else{if(e.ignoreUnknown)return n("["+l+"]");throw new Error('Unknown object type "'+l+'"')}else{var p=Object.keys(i);e.unorderedObjects&&(p=p.sort()),e.respectType!==!1&&!$e(i)&&p.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(p=p.filter(function(y){return!e.excludeKeys(y)})),n("object:"+p.length+":");var f=this;return p.forEach(function(y){f.dispatch(y),n(":"),e.excludeValues||f.dispatch(i[y]),n(",")})}},_array:function(i,s){s=typeof s<"u"?s:e.unorderedArrays!==!1;var h=this;if(n("array:"+i.length+":"),!s||i.length<=1)return i.forEach(function(p){return h.dispatch(p)});var l=[],m=i.map(function(p){var f=new Ie,y=r.slice(),A=ie(e,f,y);return A.dispatch(p),l=l.concat(y.slice(r.length)),f.read().toString()});return r=r.concat(l),m.sort(),this._array(m,!1)},_date:function(i){return n("date:"+i.toJSON())},_symbol:function(i){return n("symbol:"+i.toString())},_error:function(i){return n("error:"+i.toString())},_boolean:function(i){return n("bool:"+i.toString())},_string:function(i){n("string:"+i.length+":"),n(i.toString())},_function:function(i){n("fn:"),$e(i)?this.dispatch("[native]"):this.dispatch(i.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(i.name)),e.respectFunctionProperties&&this._object(i)},_number:function(i){return n("number:"+i.toString())},_xml:function(i){return n("xml:"+i.toString())},_null:function(){return n("Null")},_undefined:function(){return n("Undefined")},_regexp:function(i){return n("regex:"+i.toString())},_uint8array:function(i){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint8clampedarray:function(i){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(i))},_int8array:function(i){return n("int8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint16array:function(i){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(i))},_int16array:function(i){return n("int16array:"),this.dispatch(Array.prototype.slice.call(i))},_uint32array:function(i){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(i))},_int32array:function(i){return n("int32array:"),this.dispatch(Array.prototype.slice.call(i))},_float32array:function(i){return n("float32array:"),this.dispatch(Array.prototype.slice.call(i))},_float64array:function(i){return n("float64array:"),this.dispatch(Array.prototype.slice.call(i))},_arraybuffer:function(i){return n("arraybuffer:"),this.dispatch(new Uint8Array(i))},_url:function(i){return n("url:"+i.toString(),"utf8")},_map:function(i){n("map:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_set:function(i){n("set:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_file:function(i){return n("file:"),this.dispatch([i.name,i.size,i.type,i.lastModfied])},_blob:function(){if(e.ignoreUnknown)return n("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return n("domwindow")},_bigint:function(i){return n("bigint:"+i.toString())},_process:function(){return n("process")},_timer:function(){return n("timer")},_pipe:function(){return n("pipe")},_tcp:function(){return n("tcp")},_udp:function(){return n("udp")},_tty:function(){return n("tty")},_statwatcher:function(){return n("statwatcher")},_securecontext:function(){return n("securecontext")},_connection:function(){return n("connection")},_zlib:function(){return n("zlib")},_context:function(){return n("context")},_nodescript:function(){return n("nodescript")},_httpparser:function(){return n("httpparser")},_dataview:function(){return n("dataview")},_signal:function(){return n("signal")},_fsevent:function(){return n("fsevent")},_tlswrap:function(){return n("tlswrap")}}}function Ie(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}});var le=w((ri,Xe)=>{var cr=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};Xe.exports=cr});var ue=w((ni,We)=>{var lr="2.0.0",ur=Number.MAX_SAFE_INTEGER||9007199254740991,pr=16,dr=250,fr=["major","premajor","minor","preminor","patch","prepatch","prerelease"];We.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:pr,MAX_SAFE_BUILD_LENGTH:dr,MAX_SAFE_INTEGER:ur,RELEASE_TYPES:fr,SEMVER_SPEC_VERSION:lr,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Ke=w((S,Je)=>{var{MAX_SAFE_COMPONENT_LENGTH:pe,MAX_SAFE_BUILD_LENGTH:mr,MAX_LENGTH:hr}=ue(),gr=le();S=Je.exports={};var yr=S.re=[],Er=S.safeRe=[],a=S.src=[],o=S.t={},wr=0,de="[a-zA-Z0-9-]",br=[["\\s",1],["\\d",hr],[de,mr]],vr=e=>{for(let[t,r]of br)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},u=(e,t,r)=>{let n=vr(t),i=wr++;gr(e,i,t),o[e]=i,a[i]=t,yr[i]=new RegExp(t,r?"g":void 0),Er[i]=new RegExp(n,r?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*");u("NUMERICIDENTIFIERLOOSE","\\d+");u("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${de}*`);u("MAINVERSION",`(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})`);u("MAINVERSIONLOOSE",`(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})`);u("PRERELEASEIDENTIFIER",`(?:${a[o.NUMERICIDENTIFIER]}|${a[o.NONNUMERICIDENTIFIER]})`);u("PRERELEASEIDENTIFIERLOOSE",`(?:${a[o.NUMERICIDENTIFIERLOOSE]}|${a[o.NONNUMERICIDENTIFIER]})`);u("PRERELEASE",`(?:-(${a[o.PRERELEASEIDENTIFIER]}(?:\\.${a[o.PRERELEASEIDENTIFIER]})*))`);u("PRERELEASELOOSE",`(?:-?(${a[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[o.PRERELEASEIDENTIFIERLOOSE]})*))`);u("BUILDIDENTIFIER",`${de}+`);u("BUILD",`(?:\\+(${a[o.BUILDIDENTIFIER]}(?:\\.${a[o.BUILDIDENTIFIER]})*))`);u("FULLPLAIN",`v?${a[o.MAINVERSION]}${a[o.PRERELEASE]}?${a[o.BUILD]}?`);u("FULL",`^${a[o.FULLPLAIN]}$`);u("LOOSEPLAIN",`[v=\\s]*${a[o.MAINVERSIONLOOSE]}${a[o.PRERELEASELOOSE]}?${a[o.BUILD]}?`);u("LOOSE",`^${a[o.LOOSEPLAIN]}$`);u("GTLT","((?:<|>)?=?)");u("XRANGEIDENTIFIERLOOSE",`${a[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);u("XRANGEIDENTIFIER",`${a[o.NUMERICIDENTIFIER]}|x|X|\\*`);u("XRANGEPLAIN",`[v=\\s]*(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:${a[o.PRERELEASE]})?${a[o.BUILD]}?)?)?`);u("XRANGEPLAINLOOSE",`[v=\\s]*(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:${a[o.PRERELEASELOOSE]})?${a[o.BUILD]}?)?)?`);u("XRANGE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAIN]}$`);u("XRANGELOOSE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAINLOOSE]}$`);u("COERCEPLAIN",`(^|[^\\d])(\\d{1,${pe}})(?:\\.(\\d{1,${pe}}))?(?:\\.(\\d{1,${pe}}))?`);u("COERCE",`${a[o.COERCEPLAIN]}(?:$|[^\\d])`);u("COERCEFULL",a[o.COERCEPLAIN]+`(?:${a[o.PRERELEASE]})?(?:${a[o.BUILD]})?(?:$|[^\\d])`);u("COERCERTL",a[o.COERCE],!0);u("COERCERTLFULL",a[o.COERCEFULL],!0);u("LONETILDE","(?:~>?)");u("TILDETRIM",`(\\s*)${a[o.LONETILDE]}\\s+`,!0);S.tildeTrimReplace="$1~";u("TILDE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAIN]}$`);u("TILDELOOSE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAINLOOSE]}$`);u("LONECARET","(?:\\^)");u("CARETTRIM",`(\\s*)${a[o.LONECARET]}\\s+`,!0);S.caretTrimReplace="$1^";u("CARET",`^${a[o.LONECARET]}${a[o.XRANGEPLAIN]}$`);u("CARETLOOSE",`^${a[o.LONECARET]}${a[o.XRANGEPLAINLOOSE]}$`);u("COMPARATORLOOSE",`^${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]})$|^$`);u("COMPARATOR",`^${a[o.GTLT]}\\s*(${a[o.FULLPLAIN]})$|^$`);u("COMPARATORTRIM",`(\\s*)${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]}|${a[o.XRANGEPLAIN]})`,!0);S.comparatorTrimReplace="$1$2$3";u("HYPHENRANGE",`^\\s*(${a[o.XRANGEPLAIN]})\\s+-\\s+(${a[o.XRANGEPLAIN]})\\s*$`);u("HYPHENRANGELOOSE",`^\\s*(${a[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[o.XRANGEPLAINLOOSE]})\\s*$`);u("STAR","(<|>)?=?\\s*\\*");u("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");u("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ze=w((ii,Ye)=>{var xr=Object.freeze({loose:!0}),Sr=Object.freeze({}),Ar=e=>e?typeof e!="object"?xr:e:Sr;Ye.exports=Ar});var rt=w((ai,tt)=>{var Qe=/^[0-9]+$/,et=(e,t)=>{let r=Qe.test(e),n=Qe.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},$r=(e,t)=>et(t,e);tt.exports={compareIdentifiers:et,rcompareIdentifiers:$r}});var me=w((oi,ot)=>{var K=le(),{MAX_LENGTH:nt,MAX_SAFE_INTEGER:Y}=ue(),{safeRe:it,t:at}=Ke(),Rr=Ze(),{compareIdentifiers:F}=rt(),fe=class e{constructor(t,r){if(r=Rr(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>nt)throw new TypeError(`version is longer than ${nt} characters`);K("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?it[at.LOOSE]:it[at.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Y||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Y||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Y||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Y)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(K("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),F(this.major,t.major)||F(this.minor,t.minor)||F(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=t.prerelease[r];if(K("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return F(n,i)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let n=this.build[r],i=t.build[r];if(K("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return F(n,i)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),F(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};ot.exports=fe});var he=w((si,ct)=>{var st=me(),Ir=(e,t,r=!1)=>{if(e instanceof st)return e;try{return new st(e,t)}catch(n){if(!r)return null;throw n}};ct.exports=Ir});var ut=w((ci,lt)=>{var Nr=he(),kr=(e,t)=>{let r=Nr(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};lt.exports=kr});var Z=w((li,dt)=>{var pt=me(),Tr=(e,t,r)=>new pt(e,r).compare(new pt(t,r));dt.exports=Tr});var mt=w((ui,ft)=>{var Lr=Z(),Or=(e,t,r)=>Lr(e,t,r)>0;ft.exports=Or});var gt=w((pi,ht)=>{var Pr=Z(),Cr=(e,t,r)=>Pr(e,t,r)<0;ht.exports=Cr});var Et=w((di,yt)=>{var Dr=Z(),_r=(e,t,r)=>Dr(e,t,r)<=0;yt.exports=_r});var bt=w((fi,wt)=>{var Fr=he(),Mr=(e,t)=>{let r=Fr(e,t);return r?r.version:null};wt.exports=Mr});var Hr={};Wt(Hr,{default:()=>Dt});module.exports=Jt(Hr);var er=R(ke(),1),oe=require("react");var Yt=require("@raycast/api"),ae=require("react");var Te=require("react");function x(e){let t=(0,Te.useRef)(e);return t.current=e,t}var Jr=Symbol("cache without namespace");var L=require("@raycast/api"),g=require("react");var I=require("@raycast/api");var Le=e=>{let t=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:"Copy Logs",onAction(r){r.hide(),I.Clipboard.copy(t)}}};function Oe(e,t){let r=e instanceof Error?e.message:String(e);return(0,I.showToast)({style:I.Toast.Style.Failure,title:t?.title??"Something went wrong",message:r,primaryAction:t?.primaryAction??Le(e),secondaryAction:t?.primaryAction?Le(e):void 0})}var Pe=Object.prototype.hasOwnProperty;function H(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&H(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(Pe.call(e,r)&&++n&&!Pe.call(t,r)||!(r in t)||!H(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var j=require("react");function Ce(e){let t=(0,j.useRef)(e),r=(0,j.useRef)(0);return H(e,t.current)||(t.current=e,r.current+=1),(0,j.useMemo)(()=>t.current,[r.current])}function O(e,t,r){let n=(0,g.useRef)(0),[i,s]=(0,g.useState)({isLoading:!0}),h=x(e),l=x(r?.abortable),m=x(t||[]),p=x(r?.onError),f=x(r?.onData),y=x(r?.onWillExecute),A=x(i.data),M=(0,g.useRef)(),E=(0,g.useRef)({page:0}),U=(0,g.useRef)(!1),re=(0,g.useRef)(!0),xe=(0,g.useRef)(50),N=(0,g.useCallback)((...$)=>{let b=++n.current;l.current&&(l.current.current?.abort(),l.current.current=new AbortController),y.current?.($),s(d=>({...d,isLoading:!0}));let C=Zt(h.current)(...$);function D(d){return d.name=="AbortError"||b===n.current&&(p.current?p.current(d):L.environment.launchType!==L.LaunchType.Background&&Oe(d,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(k){k.hide(),M.current?.(...m.current||[])}}}),s({error:d,isLoading:!1})),d}return typeof C=="function"?(U.current=!0,C(E.current).then(({data:d,hasMore:k,cursor:jt})=>(b===n.current&&(E.current&&(E.current.cursor=jt,E.current.lastItem=d?.[d.length-1]),f.current&&f.current(d,E.current),k&&(xe.current=d.length),re.current=k,s(qt=>E.current.page===0?{data:d,isLoading:!1}:{data:(qt.data||[])?.concat(d),isLoading:!1})),d),d=>(re.current=!1,D(d)))):(U.current=!1,C.then(d=>(b===n.current&&(f.current&&f.current(d),s({data:d,isLoading:!1})),d),D))},[l,f,p,m,h,s,M,y,E]);M.current=N;let G=(0,g.useCallback)(()=>{E.current={page:0};let $=m.current||[];return N(...$)},[N,m]),_t=(0,g.useCallback)(async($,b)=>{let C;try{if(b?.optimisticUpdate){typeof b?.rollbackOnError!="function"&&b?.rollbackOnError!==!1&&(C=structuredClone(A.current?.value));let D=b.optimisticUpdate;s(d=>({...d,data:D(d.data)}))}return await $}catch(D){if(typeof b?.rollbackOnError=="function"){let d=b.rollbackOnError;s(k=>({...k,data:d(k.data)}))}else b?.optimisticUpdate&&b?.rollbackOnError!==!1&&s(d=>({...d,data:C}));throw D}finally{b?.shouldRevalidateAfter!==!1&&(L.environment.launchType===L.LaunchType.Background||L.environment.commandMode==="menu-bar"?await G():G())}},[G,A,s]),Ft=(0,g.useCallback)(()=>{E.current.page+=1;let $=m.current||[];N(...$)},[E,A,m,N]);(0,g.useEffect)(()=>{E.current={page:0},r?.execute!==!1?N(...t||[]):l.current&&l.current.current?.abort()},[Ce([t,r?.execute,N]),l,E]),(0,g.useEffect)(()=>()=>{l.current&&l.current.current?.abort()},[l]);let Mt=r?.execute!==!1?i.isLoading:!1,Ut={...i,isLoading:Mt},zt=U.current?{pageSize:xe.current,hasMore:re.current,onLoadMore:Ft}:void 0;return{...Ut,revalidate:G,mutate:_t,pagination:zt}}function Zt(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}var ln=Symbol();var B=require("react");var De;(function(e){e.Required="required"})(De||(De={}));var _e=require("react");var tr=10,rr=24*60*60*1e3,hn=Math.log(2)/(tr*rr);var Ge=R(require("os"),1);var se=e=>{try{if(typeof e=="string"){let t=JSON.parse(e);if(t&&typeof t=="object")return!0}}catch{}return!1},ce=e=>Array.isArray(e)?e.filter(t=>!!t):[];var ze=require("child_process"),je=require("util");var nr=require("@raycast/api");var Fe=R(require("os"),1);var{username:Tn}=Fe.default.userInfo();var Me=require("@raycast/api");var ir=e=>e==null?"":String(e),Ue=e=>e instanceof Error?e.message:ir(e);var q=(0,je.promisify)(ze.exec),X=e=>typeof e=="object"&&"stderr"in e?e.stderr:Ue(e);var qe=`${Ge.default.homedir()}/.midway/cookie`,ar=e=>typeof e=="object"&&e!==null&&"__type"in e&&e.__type.includes("Exception"),or=e=>typeof e=="object"&&e!==null&&"status"in e&&e.status==="error",sr=(e,t)=>{let{cookie:r,data:n,args:i=[],headers:s={},method:h,maxBuffer:l,cancel:m}=t,p=[`curl -sSL '${e}'`,`-X ${h??"GET"}`,Object.entries(s).map(([f,y])=>`-H '${f}: ${y}'`),i,n?[`-d '${JSON.stringify(n)}'`]:[],r?[`-b '${Object.entries(r).map(([f,y])=>`${f}=${y}`).join(";")}'`]:[]].flat();return q(p.join(" "),{maxBuffer:l,signal:m?.signal}).then(({stdout:f})=>se(f)?JSON.parse(f):f).catch(f=>{throw new Error(X(f))})};var P=(e,t={})=>{let{ignoreCoralError:r=!1,writeToCookieFile:n=!0,args:i=[],...s}=t,h=[i,`--anyauth --location-trusted -k -u : -b ${qe}`,n?[`-c ${qe}`]:[]].flat();return sr(e,{...s,args:h}).then(l=>{if(!r&&ar(l))throw new Error(`${l.__type}${l.message?`: ${l.message}`:""}`);if(or(l))throw new Error(`${l.message??"Midway Error"}: ${l.desc??"You should authenticate (may use mwinit)"}`);return l})};var Ve=(e,t)=>P("https://gitfarm-sso.corp.amazon.com",{...t,method:"POST",headers:{"Content-Encoding":"amz-1.0","Content-Type":"application/json; charset=UTF-8","X-Amz-Target":`com.amazon.brazil.gitfarm.service.GitFarmService.${e}`}}),He=e=>Ve("getReferenceSha1s",{data:{repositoryId:e}}).then(t=>t.references),Be=(e,t)=>Ve("getBlob",{data:{repositoryId:e,object:t}});var W=require("@raycast/api");function J(e,t=!0){let{launchType:r,extensionName:n,commandName:i}=W.environment;return!t||r===W.LaunchType.Background?Promise.resolve():P("https://analytics.raycast.tools.aws.dev/v2/stats",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},data:{commandName:i,extensionVersion:e,extensionName:n}}).catch(s=>console.warn(`Failed to publish stats for ${n}/${i}.`,s))}var v=require("@raycast/api");var vt=R(ut(),1),ge=R(mt(),1),Ur=R(gt(),1),zr=R(Et(),1),xt=R(bt(),1);var jr=e=>He(`pkg/${e}`).then(t=>ce(t).map(r=>(r.name.match(/refs\/tags\/(.*)/)??["",""])[1]).filter(r=>(0,xt.default)(r))).then(t=>t.length===0?void 0:t.reduce((r,n)=>(0,ge.default)(n,r)?n:r,t[0])).catch(t=>{console.warn(`Failed to get the latest extension version for ${e}.`,t)}),St=async e=>{let{launchType:t,extensionName:r}=v.environment,{updateCommandName:n,changelogCommandName:i,currentVersion:s,pkg:h,extensionOwner:l}=e,m=await jr(h);if(t===v.LaunchType.UserInitiated&&m&&(0,ge.default)(m,s)){let p={type:v.LaunchType.UserInitiated,extensionName:r,ownerOrAuthorName:l};await(0,v.showToast)({style:v.Toast.Style.Success,title:`\u2728 New version (${m}) now available!`,message:`Upgrade from current version (${s}) for the latest features and improvements.`,primaryAction:{title:"Update Extension",onAction:()=>(0,v.launchCommand)({name:n??"update-extension",...p})},secondaryAction:{title:"Changelog",onAction:()=>(0,v.launchCommand)({name:i??"extension-changelog",...p})}})}},At=async e=>{let{pkgName:t,changelogPath:r,limit:n=200}=e,i=await Be(`pkg/${t}`,`mainline:${r}`),s=Buffer.from(i.content,"base64").toString().split(`
`),h=s.map((p,f)=>p.match(/(?:^|\n)## (.*)/)?f:-1).filter(p=>p!==-1),l=h.length,m=[];for(let p=0;p<l;p++){let f=h[p],A=s[f].match(/##\s+\[(.+)\]\(.+\)\s+\((.+)\)/);if(!A)continue;let[,M,E]=A,U=s.slice(f,p===l-1?s.length:h[p+1]).join(`
`).replace(/(?:^|\n)## (.*)/g,`## \u{1F680} $1
---`).replace(/### Features/g,"### \u2728 New").replace(/### Bug Fixes/g,"### \u{1F41E} Fixes").replace(/### Reverts/g,"### \u23EA Reverts").replace(/### Performance Improvements/g,"### \u{1F48E} Improvements");m.push({version:`v${(0,vt.default)(M)}`,releaseDate:new Date(E),markdown:U})}return m.slice(0,Math.min(n,200))};var Rt="1.18.2";var It="zhenpewu";var ye=Rt,Nt="AmznRaycastExtension";var kt=()=>St({pkg:Nt,currentVersion:ye,extensionOwner:It}),Tt=()=>At({pkgName:Nt,changelogPath:"CHANGELOG.md",limit:50});function Ee(){O(kt,[])}var qr=()=>J(ye,!0),Lt=qr;function we(){O(Lt,[])}var ee=require("@raycast/api");var Ot=require("@raycast/api"),Pt=(s=>(s.Bronze="#CD7F32",s.Gold="#FFD700",s.LightSilver="#D8D8D8",s.Orange="#F19F39",s.Rurikon="#0B346E",s))(Pt||{}),Gr={...Ot.Color,...Pt},be=Gr;var Q=require("@raycast/api"),Ct=(c=>(c.Amazon="amazon.svg",c.AmazonChime="amazon-chime.svg",c.Badge="badge.svg",c.Book="book.svg",c.BoxArchive="box-archive.svg",c.Broadcast="broadcast.svg",c.BuilderHub="builder-hub.svg",c.BuildingColumns="building-columns.svg",c.CheckSquare="check-square.svg",c.ClappingHands="clapping-hands.svg",c.Cube="cube.svg",c.Cubes="cubes.svg",c.Document="document.svg",c.Earth="earth.svg",c.EverGeen="ever-green.svg",c.Firefox="firefox.svg",c.InternalSearch="internal-search.svg",c.Isengard="isengard.svg",c.Issue="issue.svg",c.IT="it.svg",c.PaperPlane="paper-plane.svg",c.Pipeline="pipeline.svg",c.PipelineDisabled="pipeline-disabled.svg",c.PriorityHigh="priority-high.svg",c.PriorityLow="priority-low.svg",c.PriorityMedium="priority-medium.svg",c.Quip="quip.svg",c.Sage="sage.svg",c.SavedSearch="saved-search.svg",c.Siren="siren.svg",c.Slack="slack.svg",c.Slides="slides.svg",c.Spinner="spinner.svg",c.Spreadsheet="spreadsheet.svg",c.Sprint="sprint.svg",c.SquareFive="five.svg",c.SquareFour="four.svg",c.SquareOne="one.svg",c.SquareThree="three.svg",c.SquareTwo="two.svg",c[c.Story=Q.Icon.Book]="Story",c.TaskeiRoom="taskei-room.svg",c.TaskeiSubtask="taskei-subtask.svg",c.TaskeiTask="taskei-task.svg",c.ThumbsUp="thumbs-up.svg",c.Ticket="ticket.svg",c.Wiki="wiki.svg",c))(Ct||{}),Vr={...Q.Icon,...Ct},ve=Vr;var te=require("react/jsx-runtime");function Dt(){let{isLoading:e,data:t}=O(Tt,[]);return we(),Ee(),(0,te.jsx)(ee.List,{isLoading:e,throttle:!0,isShowingDetail:!0,children:t?.map((r,n)=>{let i=n===0?be.Green:be.SecondaryText;return(0,te.jsx)(ee.List.Item,{icon:{source:ve.Tag,tintColor:i},title:r.version,accessories:[{icon:ve.Calendar,tag:{value:r.releaseDate,color:i}}],detail:(0,te.jsx)(ee.List.Item.Detail,{markdown:r.markdown})},r.version)})})}
