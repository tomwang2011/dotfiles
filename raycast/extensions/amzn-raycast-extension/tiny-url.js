"use strict";var Qe=Object.create;var A=Object.defineProperty;var et=Object.getOwnPropertyDescriptor;var tt=Object.getOwnPropertyNames;var rt=Object.getPrototypeOf,ot=Object.prototype.hasOwnProperty;var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),at=(e,t)=>{for(var r in t)A(e,r,{get:t[r],enumerable:!0})},V=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of tt(t))!ot.call(e,n)&&n!==r&&A(e,n,{get:()=>t[n],enumerable:!(o=et(t,n))||o.enumerable});return e};var g=(e,t,r)=>(r=e!=null?Qe(rt(e)):{},V(t||!e||!e.__esModule?A(r,"default",{value:e,enumerable:!0}):r,e)),st=e=>V(A({},"__esModule",{value:!0}),e);var U=p((Vr,re)=>{var dt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};re.exports=dt});var j=p((Jr,oe)=>{var mt="2.0.0",ut=Number.MAX_SAFE_INTEGER||9007199254740991,ht=16,xt=250,gt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];oe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:ht,MAX_SAFE_BUILD_LENGTH:xt,MAX_SAFE_INTEGER:ut,RELEASE_TYPES:gt,SEMVER_SPEC_VERSION:mt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var se=p((u,ae)=>{var{MAX_SAFE_COMPONENT_LENGTH:z,MAX_SAFE_BUILD_LENGTH:yt,MAX_LENGTH:Et}=j(),wt=U();u=ae.exports={};var bt=u.re=[],It=u.safeRe=[],a=u.src=[],s=u.t={},St=0,G="[a-zA-Z0-9-]",$t=[["\\s",1],["\\d",Et],[G,yt]],At=e=>{for(let[t,r]of $t)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},i=(e,t,r)=>{let o=At(t),n=St++;wt(e,n,t),s[e]=n,a[n]=t,bt[n]=new RegExp(t,r?"g":void 0),It[n]=new RegExp(o,r?"g":void 0)};i("NUMERICIDENTIFIER","0|[1-9]\\d*");i("NUMERICIDENTIFIERLOOSE","\\d+");i("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${G}*`);i("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`);i("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`);i("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`);i("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`);i("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`);i("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`);i("BUILDIDENTIFIER",`${G}+`);i("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`);i("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`);i("FULL",`^${a[s.FULLPLAIN]}$`);i("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`);i("LOOSE",`^${a[s.LOOSEPLAIN]}$`);i("GTLT","((?:<|>)?=?)");i("XRANGEIDENTIFIERLOOSE",`${a[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);i("XRANGEIDENTIFIER",`${a[s.NUMERICIDENTIFIER]}|x|X|\\*`);i("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`);i("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`);i("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`);i("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`);i("COERCEPLAIN",`(^|[^\\d])(\\d{1,${z}})(?:\\.(\\d{1,${z}}))?(?:\\.(\\d{1,${z}}))?`);i("COERCE",`${a[s.COERCEPLAIN]}(?:$|[^\\d])`);i("COERCEFULL",a[s.COERCEPLAIN]+`(?:${a[s.PRERELEASE]})?(?:${a[s.BUILD]})?(?:$|[^\\d])`);i("COERCERTL",a[s.COERCE],!0);i("COERCERTLFULL",a[s.COERCEFULL],!0);i("LONETILDE","(?:~>?)");i("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0);u.tildeTrimReplace="$1~";i("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`);i("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`);i("LONECARET","(?:\\^)");i("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0);u.caretTrimReplace="$1^";i("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`);i("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`);i("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`);i("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`);i("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0);u.comparatorTrimReplace="$1$2$3";i("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`);i("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`);i("STAR","(<|>)?=?\\s*\\*");i("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");i("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ie=p((Kr,ne)=>{var vt=Object.freeze({loose:!0}),Rt=Object.freeze({}),Tt=e=>e?typeof e!="object"?vt:e:Rt;ne.exports=Tt});var ce=p((Zr,fe)=>{var le=/^[0-9]+$/,pe=(e,t)=>{let r=le.test(e),o=le.test(t);return r&&o&&(e=+e,t=+t),e===t?0:r&&!o?-1:o&&!r?1:e<t?-1:1},Nt=(e,t)=>pe(t,e);fe.exports={compareIdentifiers:pe,rcompareIdentifiers:Nt}});var W=p((Yr,he)=>{var O=U(),{MAX_LENGTH:de,MAX_SAFE_INTEGER:L}=j(),{safeRe:me,t:ue}=se(),Ot=ie(),{compareIdentifiers:y}=ce(),q=class e{constructor(t,r){if(r=Ot(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>de)throw new TypeError(`version is longer than ${de} characters`);O("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let o=t.trim().match(r.loose?me[ue.LOOSE]:me[ue.FULL]);if(!o)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>L||this.major<0)throw new TypeError("Invalid major version");if(this.minor>L||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>L||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let l=+n;if(l>=0&&l<L)return l}return n}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(O("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),y(this.major,t.major)||y(this.minor,t.minor)||y(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let o=this.prerelease[r],n=t.prerelease[r];if(O("prerelease compare",r,o,n),o===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(o===void 0)return-1;if(o===n)continue;return y(o,n)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let o=this.build[r],n=t.build[r];if(O("prerelease compare",r,o,n),o===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(o===void 0)return-1;if(o===n)continue;return y(o,n)}while(++r)}inc(t,r,o){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,o);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,o);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,o),this.inc("pre",r,o);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,o),this.inc("pre",r,o);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(o)?1:0;if(!r&&o===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[n];else{let l=this.prerelease.length;for(;--l>=0;)typeof this.prerelease[l]=="number"&&(this.prerelease[l]++,l=-2);if(l===-1){if(r===this.prerelease.join(".")&&o===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(r){let l=[r,n];o===!1&&(l=[r]),y(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=l):this.prerelease=l}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};he.exports=q});var B=p((Qr,ge)=>{var xe=W(),Lt=(e,t,r=!1)=>{if(e instanceof xe)return e;try{return new xe(e,t)}catch(o){if(!r)return null;throw o}};ge.exports=Lt});var Ee=p((eo,ye)=>{var Ct=B(),kt=(e,t)=>{let r=Ct(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};ye.exports=kt});var C=p((to,be)=>{var we=W(),Pt=(e,t,r)=>new we(e,r).compare(new we(t,r));be.exports=Pt});var Se=p((ro,Ie)=>{var Dt=C(),Ft=(e,t,r)=>Dt(e,t,r)>0;Ie.exports=Ft});var Ae=p((oo,$e)=>{var Mt=C(),Ut=(e,t,r)=>Mt(e,t,r)<0;$e.exports=Ut});var Re=p((ao,ve)=>{var jt=C(),zt=(e,t,r)=>jt(e,t,r)<=0;ve.exports=zt});var Ne=p((so,Te)=>{var Gt=B(),qt=(e,t)=>{let r=Gt(e,t);return r?r.version:null};Te.exports=qt});var hr={};at(hr,{default:()=>Ye});module.exports=st(hr);var ee=g(require("os"),1);var P=e=>{try{if(typeof e=="string"){let t=JSON.parse(e);if(t&&typeof t=="object")return!0}}catch{}return!1},D=e=>Array.isArray(e)?e.filter(t=>!!t):[];var Z=require("child_process"),Y=require("util");var nt=require("@raycast/api");var x=require("@raycast/api"),F=class{toast;abortable;_abortController;constructor(t){this.abortable=t.abortable,this.toast=x.environment.launchType===x.LaunchType.UserInitiated?new x.Toast(t):void 0,this.updateAbortAction()}updateAbortAction(){this.toast&&(this._abortController=this.abortable?new AbortController:void 0,this.toast.primaryAction=this.abortable?{title:"Cancel",onAction:()=>{console.warn("Aborting..."),this._abortController?.abort()}}:void 0)}updateContent(t){if(this.toast){let{title:r,style:o,message:n,secondaryAction:l}=this.toast;this.toast.title=t.title??r,this.toast.style=t.style??o,this.toast.message=t.message??n,this.abortable=t.abortable??this.abortable,this.toast.secondaryAction=t.secondaryAction??l,this.updateAbortAction()}}show(){return this.toast?this.toast.show():Promise.resolve()}hide(){return this.toast?this.toast.hide():Promise.resolve()}get abortController(){return this._abortController}},M=async e=>{let t=new F(e);return await t.show(),t};var J=g(require("os"),1);var{username:Ir}=J.default.userInfo();var K=require("@raycast/api");var it=e=>e==null?"":String(e),R=e=>e instanceof Error?e.message:it(e);var I=(0,Y.promisify)(Z.exec),v=e=>typeof e=="object"&&"stderr"in e?e.stderr:R(e);var Q=`${ee.default.homedir()}/.midway/cookie`,lt=e=>typeof e=="object"&&e!==null&&"__type"in e&&e.__type.includes("Exception"),pt=e=>typeof e=="object"&&e!==null&&"status"in e&&e.status==="error",ft=(e,t)=>{let{cookie:r,data:o,args:n=[],headers:l={},method:w,maxBuffer:c,cancel:b}=t,$=[`curl -sSL '${e}'`,`-X ${w??"GET"}`,Object.entries(l).map(([d,k])=>`-H '${d}: ${k}'`),n,o?[`-d '${JSON.stringify(o)}'`]:[],r?[`-b '${Object.entries(r).map(([d,k])=>`${d}=${k}`).join(";")}'`]:[]].flat();return I($.join(" "),{maxBuffer:c,signal:b?.signal}).then(({stdout:d})=>P(d)?JSON.parse(d):d).catch(d=>{throw new Error(v(d))})};var m=(e,t={})=>{let{ignoreCoralError:r=!1,writeToCookieFile:o=!0,args:n=[],...l}=t,w=[n,`--anyauth --location-trusted -k -u : -b ${Q}`,o?[`-c ${Q}`]:[]].flat();return ft(e,{...l,args:w}).then(c=>{if(!r&&lt(c))throw new Error(`${c.__type}${c.message?`: ${c.message}`:""}`);if(pt(c))throw new Error(`${c.message??"Midway Error"}: ${c.desc??"You should authenticate (may use mwinit)"}`);return c})};var ct=(e,t)=>m("https://gitfarm-sso.corp.amazon.com",{...t,method:"POST",headers:{"Content-Encoding":"amz-1.0","Content-Type":"application/json; charset=UTF-8","X-Amz-Target":`com.amazon.brazil.gitfarm.service.GitFarmService.${e}`}}),te=e=>ct("getReferenceSha1s",{data:{repositoryId:e}}).then(t=>t.references);var T=require("@raycast/api");function N(e,t=!0){let{launchType:r,extensionName:o,commandName:n}=T.environment;return!t||r===T.LaunchType.Background?Promise.resolve():m("https://analytics.raycast.tools.aws.dev/v2/stats",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},data:{commandName:n,extensionVersion:e,extensionName:o}}).catch(l=>console.warn(`Failed to publish stats for ${o}/${n}.`,l))}var f=require("@raycast/api");var Wt=g(Ee(),1),H=g(Se(),1),Bt=g(Ae(),1),Ht=g(Re(),1),Oe=g(Ne(),1);var _t=e=>te(`pkg/${e}`).then(t=>D(t).map(r=>(r.name.match(/refs\/tags\/(.*)/)??["",""])[1]).filter(r=>(0,Oe.default)(r))).then(t=>t.length===0?void 0:t.reduce((r,o)=>(0,H.default)(o,r)?o:r,t[0])).catch(t=>{console.warn(`Failed to get the latest extension version for ${e}.`,t)}),Le=async e=>{let{launchType:t,extensionName:r}=f.environment,{updateCommandName:o,changelogCommandName:n,currentVersion:l,pkg:w,extensionOwner:c}=e,b=await _t(w);if(t===f.LaunchType.UserInitiated&&b&&(0,H.default)(b,l)){let $={type:f.LaunchType.UserInitiated,extensionName:r,ownerOrAuthorName:c};await(0,f.showToast)({style:f.Toast.Style.Success,title:`\u2728 New version (${b}) now available!`,message:`Upgrade from current version (${l}) for the latest features and improvements.`,primaryAction:{title:"Update Extension",onAction:()=>(0,f.launchCommand)({name:o??"update-extension",...$})},secondaryAction:{title:"Changelog",onAction:()=>(0,f.launchCommand)({name:n??"extension-changelog",...$})}})}};var ke="1.18.2";var Pe="zhenpewu";var _=ke,Xt="AmznRaycastExtension";var De=()=>Le({pkg:Xt,currentVersion:_,extensionOwner:Pe});var Vt=()=>N(_,!0),Fe=Vt;var E=require("@raycast/api");var Jt=typeof global=="object"&&global&&global.Object===Object&&global,Me=Jt;var Kt=typeof self=="object"&&self&&self.Object===Object&&self,Zt=Me||Kt||Function("return this")(),Ue=Zt;var Yt=Ue.Symbol,h=Yt;var je=Object.prototype,Qt=je.hasOwnProperty,er=je.toString,S=h?h.toStringTag:void 0;function tr(e){var t=Qt.call(e,S),r=e[S];try{e[S]=void 0;var o=!0}catch{}var n=er.call(e);return o&&(t?e[S]=r:delete e[S]),n}var ze=tr;var rr=Object.prototype,or=rr.toString;function ar(e){return or.call(e)}var Ge=ar;var sr="[object Null]",nr="[object Undefined]",qe=h?h.toStringTag:void 0;function ir(e){return e==null?e===void 0?nr:sr:qe&&qe in Object(e)?ze(e):Ge(e)}var We=ir;function lr(e){return e!=null&&typeof e=="object"}var Be=lr;var pr="[object Symbol]";function fr(e){return typeof e=="symbol"||Be(e)&&We(e)==pr}var He=fr;function cr(e,t){for(var r=-1,o=e==null?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}var _e=cr;var dr=Array.isArray,Xe=dr;var mr=1/0,Ve=h?h.prototype:void 0,Je=Ve?Ve.toString:void 0;function Ke(e){if(typeof e=="string")return e;if(Xe(e))return _e(e,Ke)+"";if(He(e))return Je?Je.call(e):"";var t=e+"";return t=="0"&&1/e==-mr?"-0":t}var Ze=Ke;function ur(e){return e==null?"":Ze(e)}var X=ur;async function Ye(e){let t=await M({style:E.Toast.Style.Animated,title:"Generating Tiny URL..."}),r=new URLSearchParams({name:e.arguments.url,opaque:"1"});try{let o=await m(`https://tiny.amazon.com/submit/url?${r}`,{headers:{Accept:"application/json"}});if(o.error)throw new Error(o.error);await E.Clipboard.copy(X(o.short_url)),t.updateContent({style:E.Toast.Style.Success,title:"\u{1F389} Copied generated Tiny URL to clipboard successfully."})}catch(o){t.updateContent({style:E.Toast.Style.Failure,title:"\u274C Failed to generate Tiny URL.",message:R(o)})}await Fe(),await De()}
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
